<section data-type="chapter">
<h1 id="main_heading">Business Requirements Document: Visual Editor Improvements</h1>

<p>Revision History</p>

<table class="rev_history">
	<thead>
		<tr>
			<th>Author/Compiler</th>
			<th>Description</th>
			<th>Date</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><em>Dan Fauxsmith</em></td>
			<td><i>First draft</i></td>
			<td><i>5/28/2014</i></td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
	</tbody>
</table>

<section data-type="sect1">
<h1>Business Sponsor and Organization</h1>

<p>Dan Fauxsmith, Publishing Services</p>
</section>

<section data-type="sect1">
<h1>Feature Description</h1>

<p>The visual editor is a key feature of O'Reilly Atlas, and giving users an intuitive, easy-to-learn interface is a significant selling point. If early adopters have difficulty exploring the tool, they may not take full measure of the powerful features under the hood. Once customers are using the tool, most authors, editors, production staff, and vendors are likely to rely on the visual editor. The way we build out the features of this tool has to withstand a great deal of scrutiny and be flexible enough for varied workflows.</p>

<p>This BRD describes our current wishlist of features and orders them in terms of importance and degree of impact. It is likely that the development work on these features will extend across multiple sprints. As more internal and external users begin to rely on Atlas for live production, this list will evolve and probably grow.</p>

<ul>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Better Block Handling in Visual Editor</strong>&nbsp;

	<ul>
		<li style="box-sizing: border-box;">Add the ability to promote/demote heading levels in visual editor w/o introducing errors in the document structure.&nbsp;<span style="font-size: 17px; line-height: 1.5em;">It will be a relatively common occurrence for authors, editors, copyeditors, and others to make such changes. There are many facets to this request, so this may be in a sprint on its own.</span>

		<ul>
			<li style="box-sizing: border-box;">At present, a user can select heading text and see the options &quot;heading&quot; and &quot;subhead&quot; in the drop-down &quot;insert&quot; menu. However, selecting these styles can introduce errors to the document structure. Users must have a way to increase or decrease the heading level in such a way that content under that heading is handled properly, which may impact other subheadings in that section. We should also question the usefulness of the &quot;subhead&quot; and &quot;heading&quot; style options in comparison to likelihood of introducing structure problems that could impact a build.</li>
			<li style="box-sizing: border-box;">If a user is in a level 2 section that includes a level 3 subsection, she should be able to promote the level 2 section heading to a level 1 heading and the result should be that the level 3 subsection becomes a level 2 subsection. Similarly, she should be able to demote the level 2 section to a level 3, and the level 3 subsection should become a level 4 (assuming level 4s are allowed). She should NOT be allowed to change a level 2 section to a level 4 section, as doing so would break the document structure.</li>
		</ul>
		</li>
		<li style="box-sizing: border-box;">It should be easy to move around block elements in general without jumping into the code editor. Users will want to move paragraphs, tables, figures, and sections. The editor should support these changes and help avoid breaking document structure.&nbsp;
		<ul>
			<li style="box-sizing: border-box;">A user should be able to &quot;grab&quot; a figure, table, list, or admonition and easily drag it to a new location (or copy/paste). Atlas should make this easy by intelligently grouping figure/caption, table/caption, items in a list, etc., so that they can be moved as a unit.</li>
			<li style="box-sizing: border-box;">How can we support moving entire sections and paragraphs? I'm leaving this a bit open-ended, as I think we should talk through these things.</li>
		</ul>
		</li>
		<li style="box-sizing: border-box;">Currently, sections of content are delimited using lightly colored dashed lines. After just a couple levels of content, this becomes difficult to interpret and the usefulness of the approach quickly diminishes. It would be helpful to have a clearer view of the content in specific, active sections (&quot;active&quot; could mean the section in which the cursor is placed). Consider a view in which the outline around an active content block is highlighted in a more obvious way (perhaps a more obvious highlight color when active?) when the cursor in that section. This could help clarify the structure by showing which content falls within the bounds of a specific section. For example, as I write this text, I'm in a Section 1, and the bounding box of this section could be highlight to help distinguish it and show me where I'm at in the document.&nbsp;</li>
		<li style="box-sizing: border-box;">It should be easier to identify the style applied to a block of content. This could help production staff by giving them a quick way of looking at document structure. MS Word includes this feature (I believe it's called &quot;Draft&quot; view). You might consider combining a Draft view feature with a handle to help &quot;grab&quot; and manipulate sections.
		<ul>
			<li style="box-sizing: border-box;">In this current document, you might imagine each block style definition (paragraph, bullet list item, code block, heading1, chapter title, figure, figure-caption, etc.) appearing in a row to the left of the content. (I would recommend doing this in an unobtrusive way, to make it less distracting...or even give users the ability to hide this information). It would give the ability to quickly scan the column of information to check the structure. It would be idea to be able to click on such a term and be able to change it, in just the same way you could if you were to instead highlight the content itself.</li>
			<li style="box-sizing: border-box;">Further, imagine another column that gives information just on section level. Again, it would be a great feature to be able to manipulate section hierarchy by clicking on and changing these.</li>
			<li style="box-sizing: border-box;">You might see something like this for example:</li>
			<li style="box-sizing: border-box;">
			<figure><img alt="Alt Text" class="iblock-stylespng" src="block-styles.png" />
			<figcaption>&nbsp;</figcaption>
			</figure>
			</li>
		</ul>
		</li>
	</ul>
	</li>
</ul>

<p style="box-sizing: border-box;">&nbsp;</p>

<p style="box-sizing: border-box;">&nbsp;</p>

<ul>
	<li>Requirement 2</li>
	<li>Requirement 3</li>
</ul>
</section>

<section data-type="sect1">
<h1>Success Criteria</h1>

<p><em>ENTER SUCCESS CRITERIA HERE</em></p>

<p><em>USUALLY A PARAGRAPH OR TWO EXPLAINING THE CONDITIONS THAT NEED TO BE ACHIEVED IN ORDER TO DEEM THAT THE REQUIREMENTS HAVE BEEN MET.</em></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<ul class="task-list">
	<li style="box-sizing: border-box;">&nbsp;</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Better Way to Show Tag Names, Classes, ID's:</strong>&nbsp;The Visual Editor needs a toggle or a way to show the block element names. You need to be able to know what the different tags are without jumping into the code editor.</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Better Way to Add attributes in Visual Editor:</strong>&nbsp;Ability to add attributes in the visual editor, most notably to add &quot;class&quot; attributes when needed for styling.</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Cursor-after-element Problems:</strong>&nbsp;It is sometimes difficult to place the cursor beneath inserted elements to continue editing/writing. The section handling should take this into account.</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Image Button:</strong>&nbsp;Add ability to insert images through more traditional &quot;select file to upload&quot; approach; supported through an easy to find button in UI toolbar. It should also give users the ability to add ALT text. Referenced in&nbsp;<a href="https://github.com/oreillymedia/orm-atlas/issues/876" style="box-sizing: border-box; color: rgb(65, 131, 196);">#876</a>.</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Better Table Manager:</strong>&nbsp;When inserting a table from the visual interface, you initially see a screen of options. There is no way to get back to these options in the UI (have to go to code view). Also add the ability to insert/delete new rows on a table. Referenced in&nbsp;<a href="https://github.com/oreillymedia/orm-atlas/issues/742" style="box-sizing: border-box; color: rgb(65, 131, 196);">#742</a>.</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Redesign Editor Toolbars:</strong>&nbsp;Right now we have a big dropdown with all the HTMLBook elements. We should redesign the toolbar so it's built for HTMLBook, not with HTMLBook as an afterthought.</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Add Basic Format CSS + Buttons:</strong>&nbsp;We need an easy way to add a class to something to make it underlined, strikethrough, superscript, subscript, etc. This would probably be a basic stylesheet that we always include in the builds, and buttons to insert the classes in the editor.</li>
	<li style="box-sizing: border-box;"><strong style="box-sizing: border-box;">Show Image File Names in Visual Editor:</strong>&nbsp;Right now it's not possible to see the file name of an image in the visual editor. Add some kind of hover/toggle to show/hide image file names. Referenced in&nbsp;<a href="https://github.com/oreillymedia/orm-atlas/issues/952" style="box-sizing: border-box; color: rgb(65, 131, 196);">#952</a>.</li>
	<li style="box-sizing: border-box;">
	<p style="box-sizing: border-box; margin: 15px 0px;"><strong style="box-sizing: border-box;">Allow customization of styling toolbar:</strong>&nbsp;Let users add/remove toolbar buttons in the Visual Editor, so they can remove buttons that are not applicable to them. For example, get rid of the &quot;pre&quot; button for fiction publishers</p>
	</li>
	<li style="box-sizing: border-box;">
	<p style="box-sizing: border-box; margin: 15px 0px;">add sections</p>
	</li>
	<li style="box-sizing: border-box;">
	<p style="box-sizing: border-box; margin: 15px 0px;">move sections</p>
	</li>
	<li style="box-sizing: border-box;">
	<p style="box-sizing: border-box; margin: 15px 0px;">move tables</p>
	</li>
	<li style="box-sizing: border-box;">
	<p style="box-sizing: border-box; margin: 15px 0px;">move figures</p>
	</li>
	<li style="box-sizing: border-box;">
	<p style="box-sizing: border-box; margin: 15px 0px;">easier to see block styles</p>
	</li>
</ul>
</section>

<section data-type="sect1">
<h1>Maximum Level of Development Effort</h1>

<p>XLarge. Will likely involve multiple sprints.</p>
</section>

<section data-type="sect1">
<h1>Areas of Impact</h1>

<p>Please X all areas of functionality that will need to be changed to incorporate this feature:</p>

<table>
	<tbody>
		<tr>
			<td class="checkbox">&nbsp;</td>
			<td>x Visual Editor</td>
			<td class="checkbox">&nbsp;</td>
			<td>Code Editor</td>
		</tr>
		<tr>
			<td class="checkbox">&nbsp;</td>
			<td>Atlas API</td>
			<td class="checkbox">&nbsp;</td>
			<td>Atlas Workers</td>
		</tr>
		<tr>
			<td class="checkbox">&nbsp;</td>
			<td>Atlas Reader</td>
			<td class="checkbox">&nbsp;</td>
			<td>CSS Themes</td>
		</tr>
		<tr>
			<td class="checkbox">&nbsp;</td>
			<td>HTMLBook XSL</td>
			<td class="checkbox">&nbsp;</td>
			<td>Markdown/AsciiDoc parsers</td>
		</tr>
		<tr>
			<td class="checkbox">&nbsp;</td>
			<td>GitLab</td>
			<td class="checkbox">&nbsp;</td>
			<td><em>ENTER YOUR OWN HERE</em></td>
		</tr>
	</tbody>
</table>
</section>
</section>
